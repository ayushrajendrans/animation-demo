/*! For license information please see face-porsche.min.js.LICENSE.txt */
var _interactive_gallery_face_porsche;this.IG=this.IG||{},(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.r(t),e.d(t,{PorscheFace:()=>o}),IG;const n=IG.vendors;function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t.renderer,this.scene=new n.Three.Scene,this.texture=this.renderer.renderTarget.texture,this._setIllus(t.gallery,t.videos),this._setElements(t.gallery)}var t,o,s;return t=e,s=[{key:"NAME",get:function(){return"porsche"}}],(o=[{key:"name",get:function(){return e.NAME}},{key:"update",value:function(){var e=this.elements,t=(0,n.getCurrentTime)(),r=t.hoursRotation,i=t.minutesRotation,o=t.secondsRotation;e.needleHours&&(e.needleHours.mesh.rotation.z=r),e.needleMinutes&&(e.needleMinutes.mesh.rotation.z=i),e.needleSeconds&&(e.needleSeconds.mesh.rotation.z=o),this.renderer.render(this.scene)}},{key:"_setIllus",value:function(e,t){var r=this;this.illustrations={},this.illustrations.items=[{name:"0",videoSrc:t.porchesFace0,staticTexture:e.resources.items.porscheFace0Texture}];var o,s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,s=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw s}}}}(this.illustrations.items);try{for(s.s();!(o=s.n()).done;){var a=o.value;a.videoSrc?(a.$video=(0,n.createEl)("video",null,null,null,{src:a.videoSrc,loop:!0,autoplay:!1,muted:!0,playsinline:"playsinline"}),a.videoTexture=new n.Three.VideoTexture(a.$video),a.videoTexture.minFilter=n.Three.NearestFilter,a.videoTexture.magFilter=n.Three.NearestFilter,a.videoTexture.generateMipmaps=!1,a.videoTexture.encoding=n.Three.sRGBEncoding,a.hasVideo=!0):a.hasVideo=!1,a.staticTexture.encoding=n.Three.sRGBEncoding}}catch(e){s.e(e)}finally{s.f()}this.illustrations.current=this.illustrations.items[0],this.illustrations.current.hasVideo&&n.gsap.delayedCall(1,(function(){r.illustrations.current.hasVideo&&(r.illustrations.current.$video.currentTime=0,r.illustrations.current.$video.muted=!0,r.illustrations.current.$video.play().catch((function(){console.log("PASS"),r.videoSupported=!1,r.elements.illustration.material.map=r.illustrations.current.staticTexture})))}))}},{key:"_setElements",value:function(e){this.elements={};for(var t=1024,r=1024,i=0,o=0,s=[{name:"illustration",type:"video",width:t,height:r,x:0,y:0,offsetX:0,offsetY:0},{name:"dayLetter",type:"texture",width:t,height:r,texture:"porscheDayLetterTexture",x:0,y:0,offsetX:0,offsetY:0},{name:"dayNumber",type:"texture",width:t,height:r,texture:"porscheDayNumberTexture",x:0,y:0,offsetX:0,offsetY:0},{name:"needleHours",type:"texture",texture:"porscheHoursTexture",x:0,y:0,offsetX:0,offsetY:.29},{name:"needleMinutes",type:"texture",texture:"porscheMinutesTexture",x:0,y:0,offsetX:0,offsetY:.29},{name:"needleSeconds",type:"texture",texture:"porscheSecondsTexture",x:0,y:0,offsetX:0,offsetY:.29}];o<s.length;o++){var a=s[o],u={};if(u.type=a.type,"texture"===u.type?(u.texture=e.resources.items[a.texture],u.texture.encoding=n.Three.sRGBEncoding):"video"===u.type&&(u.texture=this.illustrations.current.videoTexture),void 0===a.width&&(a.width=u.texture.image.width),void 0===a.height&&(a.height=u.texture.image.height),a.offsetXBeforeRef){var l=e.resources.items[a.offsetXBeforeRef].image.width;a.offsetX=-l/t-.035}if(a.offsetXAfterRef){var c=e.resources.items[a.offsetXAfterRef].image.width;a.offsetX=c/t+.035}u.geometry=new n.Three.PlaneGeometry(a.width/t*2,a.height/r*2),0===a.offsetX&&0===a.offsetY||u.geometry.translate(a.offsetX,a.offsetY,0);var f=a.MaterialClass?a.MaterialClass:n.Three.MeshBasicMaterial;u.material=new f({map:u.texture,transparent:!0,toneMapped:!1}),u.mesh=new n.Three.Mesh(u.geometry,u.material),u.mesh.position.x=a.x,u.mesh.position.y=a.y,u.mesh.position.z=i,this.scene.add(u.mesh),this.elements[a.name]=u,i++}}}])&&r(t.prototype,o),s&&r(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();_interactive_gallery_face_porsche=t})(),Object.assign(this.IG,_interactive_gallery_face_porsche);